---
title: test-paths
---

```{r}
library(here)

# Source the portable project setup function
# First, we need to find where the setup file is relative to this script
script_dir <- tryCatch(
  dirname(normalizePath(knitr::current_input())),
  error = function(e) getwd()
)

# Navigate to the bin directory from the script location
# This file is in paper/, so bin/ is ../bin/
setup_file <- file.path(script_dir, "..", "bin", "setup_project_here.R")

if (file.exists(setup_file)) {
  source(setup_file)
  # Use the wrapper function that handles here package loading
  project_root <- setup_toxin_project_here()
} else {
  # Fallback: try from working directory
  setup_file <- file.path(getwd(), "projects", "ToxinGWAS_Manuscript", "bin", "setup_project_here.R")
  if (file.exists(setup_file)) {
    source(setup_file)
    project_root <- setup_toxin_project_here()
  } else {
    stop("Could not find setup_project_here.R")
  }
}

success <- !is.null(project_root)
if (!success) {
  project_root <- "NOT FOUND"
}

# Show where we are
cat("Working directory:", getwd(), "\n")
cat("here() resolves to:", here(), "\n")
cat("ToxinGWAS project root:", project_root, "\n")
cat("Successfully set here():", success, "\n")

# Show some key files that should exist
if (success) {
  cat("\nKey files exist:\n")
  cat("  _quarto.yml:", file.exists(here("_quarto.yml")), "\n")
  cat("  bin/ directory:", dir.exists(here("bin")), "\n")
  cat("  data/ directory:", dir.exists(here("data")), "\n")
}
```

